<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>Tutorial 01 - lua Basics | ug4.github.io</title>
    <meta name="generator" content="Jekyll v4.2.2" />
    <meta property="og:title" content="Tutorial 01 - lua Basics" />
    <meta property="og:locale" content="en_US" />
    <link
      rel="canonical"
      href="http://www.ug4.github.io/UG4Webpage/tutorials/lua/01_lua_basics.html"
    />
    <meta
      property="og:url"
      content="http://www.ug4.github.io/UG4Webpage/tutorials/lua/01_lua_basics.html"
    />
    <meta property="og:site_name" content="ug4.github.io" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Tutorial 01 - lua Basics" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "headline": "Tutorial 01 - lua Basics",
        "url": "http://www.ug4.github.io/UG4Webpage/tutorials/lua/01_lua_basics.html"
      }
    </script>
    <!-- End Jekyll SEO tag -->
    <link rel="stylesheet" href="/UG4Webpage/assets/css/main.css" />
    <link rel="icon" type="image/png" href="/UG4Webpage/favicon.ico" />

    <title>Tutorial 01 - lua Basics - ug4.github.io</title>
  </head>

  <body>
    <header>
      <div class="ug-navbar">
        <div class="container px-3">
          <nav class="navbar navbar-expand-lg py-0 px-2">
            <div class="position-relative p-0">
              <a class="navbar-brand" href="/">ug4</a>
              <button
                class="navbar-toggler position-absolute"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
            </div>
            <div class="container p-0">
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav nav-fill w-100">
                  <li class="nav-item ug-nav-item">
                    <a class="nav-link" href="/UG4Webpage/">About</a>
                  </li>

                  <li class="nav-item ug-nav-item">
                    <a class="nav-link" href="/UG4Webpage/setup">Setup</a>
                  </li>

                  <li class="nav-item ug-nav-item">
                    <a class="nav-link" href="/UG4Webpage/examples">Examples</a>
                  </li>

                  <li class="nav-item ug-nav-item dropdown active">
                    <a
                      class="nav-link ug-nav-item dropdown-toggle active"
                      href="#"
                      role="button"
                      data-bs-toggle="dropdown"
                      aria-expanded="false"
                    >
                      Tutorials
                    </a>
                    <ul class="dropdown-menu">
                      <li>
                        <a
                          class="dropdown-item"
                          href="/UG4Webpage/tutorials/scripting"
                          >Lua Scripting</a
                        >
                      </li>

                      <li>
                        <a
                          class="dropdown-item"
                          href="/UG4Webpage/tutorials/python"
                          >Python Scripting</a
                        >
                      </li>
                    </ul>
                  </li>

                  <li class="nav-item ug-nav-item">
                    <a class="nav-link" href="/UG4Webpage/docs"
                      >Documentation</a
                    >
                  </li>

                  <li class="nav-item ug-nav-item">
                    <a class="nav-link" href="/UG4Webpage/development"
                      >Development</a
                    >
                  </li>

                  <li class="nav-item ug-nav-item">
                    <a class="nav-link" href="/UG4Webpage/publications"
                      >Publications</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </header>

    <div class="container py-3">
      <div class="container px-2 py-2">
        <h1>Tutorial 01 - lua Basics</h1>
        <p>
          This tutorial will show you some of the basics of the lua syntax.
          Detailed information can be found at
          <a href="http://www.lua.org/manual/5.1/manual.html"
            >http://www.lua.org/manual/5.1/manual.html</a
          >
        </p>
        <p>
          Note that lua has some powerful features that go far beyond this
          tutorial. A comprehensive and structured introduction is given at
          <a href="http://www.lua.org/pil/index.html"
            >http://www.lua.org/pil/index.html</a
          >
        </p>
        <p>This short tutorial contains several small sections:</p>
        <ul>
          <li>Section 0: comments</li>
          <li>Section 1: variables and strings</li>
          <li>Section 2: control structures</li>
          <li>Section 3: tables (arrays and much more)</li>
          <li>Section 4: functions</li>
          <li>Section 5: scopes</li>
          <li>Section 6: standard libraries</li>
        </ul>

        <h4 id="section-0-comments">Section 0: comments</h4>
        <p>
          This is for sure the shortest section of this tutorial. You may
          already have realized that lines starting with a <code>--</code> are
          regarded as comments in lua. Of course a comment does not have to
          start at the beginning of a line but may be appended to a regular code
          statement. there are also
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="cm">--[[
multi-line
comments
]]</span><span class="c1">--</span></code></pre>
        </figure>
        <h4 id="section-1-variables-and-strings">
          Section 1: variables and strings
        </h4>

        <p>
          lua variables do not have a type. A variable is declared by simply
          using it: weâ€™re using the print command to output values to the
          console.
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">var</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="s2">"now I'm a string"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span></code></pre>
        </figure>
        <p>
          One can use the <code>..</code> operator to concatenate strings Note
          that known types are implicitly converted to strings on the fly
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">var1</span> <span class="o">=</span> <span class="s2">"A concatenated"</span>
<span class="n">var2</span> <span class="o">=</span> <span class="s2">" message and 5 is "</span>
<span class="n">var3</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">str</span> <span class="o">=</span> <span class="n">var1</span> <span class="o">..</span> <span class="n">var2</span> <span class="o">..</span> <span class="n">var3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">str</span><span class="p">)</span></code></pre>
        </figure>
        <p>
          uninitialized variables are set to <code>nil</code> by default. Note
          that <code>nil</code> is a special value defined by lua and can not be
          transformed to a number. You can invalidate a variable by setting it
          to <code>nil</code>.
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="nb">print</span><span class="p">(</span><span class="n">varUninitialized</span><span class="p">)</span></code></pre>
        </figure>
        <p>
          to convert a number in a string to a real number, simply use tonumber
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">a</span> <span class="o">=</span> <span class="s2">"5"</span>
<span class="n">b</span> <span class="o">=</span> <span class="nb">tonumber</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span></code></pre>
        </figure>
        <p>
          to check if a substring is contained in a string, you may use
          string.find. if the string is found, the indices where the substring
          starts and ends are returned (indices starting from 1). If the
          substring is not found, <code>nil</code> is returned.
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">testStr</span> <span class="o">=</span> <span class="s2">"Found something in here at: "</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">string.find</span><span class="p">(</span><span class="n">testStr</span><span class="p">,</span> <span class="s2">"something"</span><span class="p">)</span>
<span class="n">write</span><span class="p">(</span><span class="n">testStr</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s2">", "</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span></code></pre>
        </figure>
        <p>
          There are a lot of great tools to manipulate, split and tokenize
          strings in lua, including comprehensive pattern matching. It is
          definitley a good idea to take a closer look into this if you intend
          to do any of the above.
        </p>

        <h4 id="section-2-control-structures">Section 2: control structures</h4>

        <p>
          lua supports the common control structures like for, if etc. Here are
          some examples:
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">if</span> <span class="n">varUninitialized</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">then</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"varUninitialized is still uninitialized."</span><span class="p">)</span>
<span class="k">else</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"someone initialized varUninitialized!"</span><span class="p">)</span>
<span class="k">end</span></code></pre>
        </figure>
        <p>the negation operator in lua is ~</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">if</span> <span class="n">varUninitialized</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">then</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"varUninitialized is still initialized..."</span><span class="p">)</span>
<span class="k">else</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"varUninitialized is still uninitialized..."</span><span class="p">)</span>
<span class="k">end</span></code></pre>
        </figure>
        <p>
          We now use a for loop to assemble a string. We iterate from 1 to 5.
          The default step size is 1.
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">str</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span> <span class="k">do</span>
	<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">i</span> <span class="o">..</span> <span class="s2">" "</span>
<span class="k">end</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"assembled string in for loop: "</span> <span class="o">..</span> <span class="n">str</span><span class="p">)</span></code></pre>
        </figure>
        <p>Now lets use a step size of 2</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">str</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span> <span class="k">do</span>
	<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">i</span> <span class="o">..</span> <span class="s2">" "</span>
<span class="k">end</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"assembled sting in for loop with step size 2: "</span> <span class="o">..</span> <span class="n">str</span><span class="p">)</span></code></pre>
        </figure>
        <p>
          There are many more control structures in lua. Please check the lua
          reference for more details.
        </p>

        <h4 id="section-3-tables-arrays-and-much-more">
          Section 3: tables (arrays and much more)
        </h4>

        <p>
          Lua uses tables for everything that goes beyond basic types.
          Especially arrays and associative containers are modeled using tables.
          Note that tables in lua can even be used to model classes for object
          oriented programming. However we wonâ€™t go into that in this tutorial.
        </p>

        <p>A simple array. Note that indices start at 1.</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="nb">print</span><span class="p">(</span><span class="s2">"An array:"</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">}</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">do</span>
	<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
	<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">end</span></code></pre>
        </figure>
        <p>
          Arrays can also be filled dynamically. Note that the variable first
          has to contain a table. Another interesting thing about lua tables
          (and thus arrays) is that different entries can contain values of
          different types.
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">dynArray</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">dynArray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"a string "</span>
<span class="n">dynArray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"and a number: "</span>
<span class="n">dynArray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">13</span></code></pre>
        </figure>
        <p>
          weâ€™re using the ipairs method here, which allows us to iterate over
          all entries of an array until the value <code>nil</code> is reached.
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">str</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">tval</span> <span class="k">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">dynArray</span><span class="p">)</span> <span class="k">do</span>
	<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">tval</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"And another array: "</span> <span class="o">..</span> <span class="n">str</span><span class="p">)</span></code></pre>
        </figure>
        <p>tables can of course also contain other tables:</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">dynArray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">33</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="s2">"end of subtable"</span><span class="p">}</span></code></pre>
        </figure>
        <p>
          Note that arrays are not copied during assignment. Instead both
          variables then point to the same table
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">tmpArray</span> <span class="o">=</span> <span class="n">dynArray</span></code></pre>
        </figure>
        <p>tmpArray and dynArray now both point to the same table.</p>

        <p>
          tables can also be used as associative containers (indeed, this is
          what they are):
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">con</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">con</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Sebastian"</span>
<span class="n">con</span><span class="p">[</span><span class="s2">"occupation"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"..."</span>
<span class="n">con</span><span class="p">[</span><span class="s2">"age"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"private!"</span></code></pre>
        </figure>
        <p>
          Thereâ€™s an interesting alternative syntax to access those fields which
          are identified by a string:
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="nb">print</span><span class="p">(</span><span class="s2">"Name: "</span> <span class="o">..</span> <span class="n">con</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Occupation: "</span> <span class="o">..</span> <span class="n">con</span><span class="p">.</span><span class="n">occupation</span><span class="p">)</span></code></pre>
        </figure>
        <p>of course the original array-like access is also valid:</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="nb">print</span><span class="p">(</span><span class="s2">"Age: "</span> <span class="o">..</span> <span class="n">con</span><span class="p">[</span><span class="s2">"age"</span><span class="p">])</span></code></pre>
        </figure>
        <p>Be sure to check the reference documentation on tables.</p>

        <h4 id="section-4-functions">Section 4: functions</h4>

        <p>
          In this section weâ€™ll introduce functions. They can be used similarily
          to functions in nearly every other programming language. However there
          is one important difference: A function can return multiple return
          values.
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">function</span> <span class="nf">AddFunc</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"48 and 89 sums up to "</span> <span class="o">..</span> <span class="n">AddFunc</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">89</span><span class="p">))</span></code></pre>
        </figure>
        <p>Now a method with two return values</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">function</span> <span class="nf">Scale</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">y</span><span class="o">*</span><span class="n">a</span>
<span class="k">end</span>

<span class="n">xScaled</span><span class="p">,</span> <span class="n">yScaled</span> <span class="o">=</span> <span class="n">Scale</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"3 and 4 scaled by 2 results in "</span> <span class="o">..</span> <span class="n">xScaled</span> <span class="o">..</span> <span class="s2">" and "</span> <span class="o">..</span> <span class="n">yScaled</span><span class="p">)</span></code></pre>
        </figure>
        <p>NOTE: omitted parameters are set to <code>nil</code>:</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">function</span> <span class="nf">myprint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
	<span class="k">if</span><span class="p">(</span><span class="n">a</span> <span class="o">~=</span> <span class="kc">nil</span><span class="p">)</span> <span class="k">then</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">end</span>
	<span class="k">if</span><span class="p">(</span><span class="n">b</span> <span class="o">~=</span> <span class="kc">nil</span><span class="p">)</span> <span class="k">then</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">end</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"myprint(\"</span><span class="n">hello</span><span class="p">:</span><span class="err">\</span><span class="s2">") "</span><span class="p">)</span>
<span class="n">myprint</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">)</span> <span class="c1">-- omitted parameter 'b'</span>
<span class="n">myprint</span><span class="p">()</span> <span class="c1">-- omitted both parameters</span></code></pre>
        </figure>
        <p>(this is also true for wrapped C/C++-functions)</p>

        <p>
          functions can also be part of tables (this can be used to create
          â€˜namespacesâ€™)
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">mytable</span> <span class="o">=</span> <span class="n">mytable</span> <span class="ow">or</span> <span class="p">{}</span>
<span class="k">function</span> <span class="nc">mytable</span><span class="p">.</span><span class="nf">print_stuff</span><span class="p">()</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"hello!"</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">mytable</span><span class="p">.</span><span class="n">print_stuff</span><span class="p">();</span></code></pre>
        </figure>
        <p>to â€˜extend namespacesâ€™ use</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">mytable</span> <span class="o">=</span> <span class="n">mytable</span> <span class="ow">or</span> <span class="p">{}</span></code></pre>
        </figure>
        <p>because if you use</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">mytable</span> <span class="o">=</span> <span class="p">{}</span></code></pre>
        </figure>
        <p>mytable.print_stuff is gone.</p>

        <h4 id="section-5-scopes">Section 5: scopes</h4>

        <p>
          Note that lua has special scope rules. A variable used in a method is
          by default a global variable and exists even after the method was
          terminated. If you want to use temporary variables only visible inside
          the function itself, you have to use the â€˜localâ€™ keyword:
        </p>

        <p>
          Here an example with a non-local variable first used in a function:
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">function</span> <span class="nf">SetGlobalVar</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
	<span class="n">globalVar</span> <span class="o">=</span> <span class="n">a</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of globalVar before call to SetGlobalVar(77): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">globalVar</span><span class="p">)</span>
<span class="n">SetGlobalVar</span><span class="p">(</span><span class="mi">77</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of globalVar after call to SetGlobalVar(77): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">globalVar</span><span class="p">)</span></code></pre>
        </figure>
        <p>And now an example with a local variable</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">function</span> <span class="nf">SetLocalVar</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
	<span class="kd">local</span> <span class="n">localVar</span> <span class="o">=</span> <span class="n">a</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of localVar before call to SetLocalVar(33): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">localVar</span><span class="p">)</span>
<span class="n">SetLocalVar</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of localVar after call to SetLocalVar(33): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">localVar</span><span class="p">)</span></code></pre>
        </figure>
        <h4 id="section-6-standard-libraries-httpwwwluaorgmanual51manualhtml5">
          Section 6: standard libraries (<a
            href="http://www.lua.org/manual/5.1/manual.html#5"
            >http://www.lua.org/manual/5.1/manual.html#5</a
          >)
        </h4>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="nb">print</span><span class="p">(</span><span class="s2">"LUA Version is "</span> <span class="o">..</span> <span class="n">_VERSION</span><span class="p">)</span> <span class="c1">-- might be nice to know</span></code></pre>
        </figure>
        <p>
          string manipulation (<a
            href="http://www.lua.org/manual/5.1/manual.html#5.4"
            >http://www.lua.org/manual/5.1/manual.html#5.4</a
          >) sometimes you want to format your strings like this
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="nb">print</span><span class="p">(</span><span class="s2">"normal: "</span> <span class="o">..</span> <span class="nb">math.pi</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"formatted: "</span> <span class="o">..</span> <span class="nb">string.format</span> <span class="p">(</span><span class="s2">"%.40f"</span><span class="p">,</span> <span class="nb">math.pi</span><span class="p">)</span> <span class="p">)</span></code></pre>
        </figure>
        <p>
          math functions (<a
            href="http://www.lua.org/manual/5.1/manual.html#5.6"
            >http://www.lua.org/manual/5.1/manual.html#5.6</a
          >) math.abs math.acos math.asin math.atan math.atan2 math.ceil
          math.cos math.deg math.exp math.floor math.log math.log10 math.max
          math.min math.mod math.pow math.rad math.sin math.sqrt math.tan
          math.frexp math.ldexp math.random math.randomseed
        </p>

        <p>
          i/o . (<a href="http://www.lua.org/manual/5.1/manual.html#5.7"
            >http://www.lua.org/manual/5.1/manual.html#5.7</a
          >) with io.open, you get access to files. io.open returns a handle
          which is actually a FILE* pointer
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">file</span> <span class="o">=</span> <span class="nb">io.open</span><span class="p">(</span><span class="s2">"tut01_lua_basics_output.txt"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">)</span></code></pre>
        </figure>
        <p>use file:write to write data to the file</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">file</span><span class="p">:</span><span class="n">write</span><span class="p">(</span><span class="s2">"hello world"</span><span class="p">)</span>  <span class="c1">-- this is the same as file:write(tostring(s))</span>
<span class="nb">io.close</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></code></pre>
        </figure>
        <p>
          operating system facilities (<a
            href="http://www.lua.org/manual/5.1/manual.html#5.8"
            >http://www.lua.org/manual/5.1/manual.html#5.8</a
          >) we only cover time and date functions here:
        </p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="n">tBefore</span> <span class="o">=</span> <span class="nb">os.clock</span><span class="p">()</span></code></pre>
        </figure>
        <p>do something</p>
        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">1</span> <span class="k">do</span>
<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">i</span> <span class="o">..</span> <span class="s2">" "</span>
<span class="k">end</span>
<span class="n">tAfter</span> <span class="o">=</span> <span class="nb">os.clock</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"took "</span> <span class="o">..</span> <span class="n">tAfter</span><span class="o">-</span><span class="n">tBefore</span> <span class="o">..</span> <span class="s2">" seconds!"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"it is "</span> <span class="o">..</span> <span class="nb">os.date</span><span class="p">(</span><span class="s2">"%X on %x"</span><span class="p">))</span>
<span class="n">filenamedate</span> <span class="o">=</span> <span class="nb">os.date</span><span class="p">(</span><span class="s2">"y%ym%dd%d"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"you can use "</span> <span class="o">..</span> <span class="n">filenamedate</span> <span class="o">..</span> <span class="s2">" as prefix for your files"</span><span class="p">)</span></code></pre>
        </figure>

        <h3 id="complete-code">Complete Code</h3>

        <figure class="highlight">
          <pre><code class="language-lua" data-lang="lua"><span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">--	\file tut01_lua_basics.lua</span>
<span class="c1">--</span>
<span class="c1">--  \title lua Basics</span>
<span class="c1">--</span>
<span class="c1">--  \brief This tutorial introduces the basic concepts of the Lua scripting</span>
<span class="c1">--  language. It is intended for users who are new to Lua and want to learn the</span>
<span class="c1">--  basics. In contrary to the following scripting tutorials, it will not yet</span>
<span class="c1">--  use any command specific to ug4.</span>
<span class="c1">--</span>
<span class="c1">--	This tutorial will show you some of the basics of the lua syntax.</span>
<span class="c1">--	Detailed information can be found at</span>
<span class="c1">--	http://www.lua.org/manual/5.1/manual.html</span>
<span class="c1">--</span>
<span class="c1">--	Note that lua has some powerful features that go far beyond this tutorial.</span>
<span class="c1">--	A comprehensive and structured introduction is given at</span>
<span class="c1">--	http://www.lua.org/pil/index.html</span>
<span class="c1">--</span>
<span class="c1">--	This short tutorial contains several small sections:</span>
<span class="c1">--	* Section 0: comments</span>
<span class="c1">--	* Section 1: variables and strings</span>
<span class="c1">--	* Section 2: control structures</span>
<span class="c1">--	* Section 3: tables (arrays and much more)</span>
<span class="c1">--	* Section 4: functions</span>
<span class="c1">--	* Section 5: scopes</span>
<span class="c1">--  * Section 6: standard libraries</span>
<span class="c1">--------------------------------------------------------------------------------</span>



<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- Section 0: comments</span>
<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- This is for sure the shortest section of this tutorial.</span>
<span class="c1">-- You may already have realized that lines starting with a -- are regarded</span>
<span class="c1">-- as comments in lua. Of course a comment does not have to start at the</span>
<span class="c1">-- beginning of a line but may be appended to a regular code statement.</span>
<span class="c1">-- there are also</span>

<span class="cm">--[[
multi-line
comments
]]</span><span class="c1">--</span>


<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- Section 1: variables and strings</span>
<span class="c1">--------------------------------------------------------------------------------</span>

<span class="c1">-- lua variables do not have a type. A variable is declared by simply using it:</span>
<span class="c1">-- we're using the print command to output values to the console.</span>
<span class="n">var</span> <span class="o">=</span> <span class="mi">3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>
<span class="n">var</span> <span class="o">=</span> <span class="s2">"now I'm a string"</span>
<span class="nb">print</span><span class="p">(</span><span class="n">var</span><span class="p">)</span>

<span class="c1">-- One can use the .. operator to concatenate strings</span>
<span class="c1">-- Note that known types are implicitly converted to strings on the fly</span>
<span class="n">var1</span> <span class="o">=</span> <span class="s2">"A concatenated"</span>
<span class="n">var2</span> <span class="o">=</span> <span class="s2">" message and 5 is "</span>
<span class="n">var3</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">str</span> <span class="o">=</span> <span class="n">var1</span> <span class="o">..</span> <span class="n">var2</span> <span class="o">..</span> <span class="n">var3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>

<span class="c1">-- uninitialized variables are set to nil by default.</span>
<span class="c1">-- Note that nil is a special value defined by lua and can not be transformed</span>
<span class="c1">-- to a number. You can invalidate a variable by setting it to nil.</span>
<span class="nb">print</span><span class="p">(</span><span class="n">varUninitialized</span><span class="p">)</span>


<span class="c1">-- to convert a number in a string to a real number, simply use tonumber</span>
<span class="n">a</span> <span class="o">=</span> <span class="s2">"5"</span>
<span class="n">b</span> <span class="o">=</span> <span class="nb">tonumber</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>

<span class="c1">-- to check if a substring is contained in a string, you may use string.find.</span>
<span class="c1">-- if the string is found, the indices where the substring starts and ends are</span>
<span class="c1">-- returned (indices starting from 1). If the substring is not found, nil is returned.</span>
<span class="n">testStr</span> <span class="o">=</span> <span class="s2">"Found something in here at: "</span>
<span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">string.find</span><span class="p">(</span><span class="n">testStr</span><span class="p">,</span> <span class="s2">"something"</span><span class="p">)</span>
<span class="n">write</span><span class="p">(</span><span class="n">testStr</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="s2">", "</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>

<span class="c1">-- There are a lot of great tools to manipulate, split and tokenize strings</span>
<span class="c1">-- in lua, including comprehensive pattern matching. It is definitley</span>
<span class="c1">-- a good idea to take a closer look into this if you intend to do any of</span>
<span class="c1">-- the above.</span>




<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- Section 2: control structures</span>
<span class="c1">--------------------------------------------------------------------------------</span>

<span class="c1">-- lua supports the common control structures like for, if etc.</span>
<span class="c1">-- Here are some examples:</span>
<span class="k">if</span> <span class="n">varUninitialized</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">then</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"varUninitialized is still uninitialized."</span><span class="p">)</span>
<span class="k">else</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"someone initialized varUninitialized!"</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- the negation operator in lua is ~</span>
<span class="k">if</span> <span class="n">varUninitialized</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">then</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"varUninitialized is still initialized..."</span><span class="p">)</span>
<span class="k">else</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"varUninitialized is still uninitialized..."</span><span class="p">)</span>
<span class="k">end</span>

<span class="c1">-- We now use a for loop to assemble a string.</span>
<span class="c1">-- We iterate from 1 to 5. The default step size is 1.</span>
<span class="n">str</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span> <span class="k">do</span>
	<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">i</span> <span class="o">..</span> <span class="s2">" "</span>
<span class="k">end</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"assembled string in for loop: "</span> <span class="o">..</span> <span class="n">str</span><span class="p">)</span>

<span class="c1">-- Now lets use a step size of 2</span>
<span class="n">str</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span> <span class="k">do</span>
	<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">i</span> <span class="o">..</span> <span class="s2">" "</span>
<span class="k">end</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"assembled sting in for loop with step size 2: "</span> <span class="o">..</span> <span class="n">str</span><span class="p">)</span>

<span class="c1">-- There are many more control structures in lua. Please check the lua reference</span>
<span class="c1">-- for more details.</span>




<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- Section 3: tables (arrays and much more)</span>
<span class="c1">--------------------------------------------------------------------------------</span>

<span class="c1">-- Lua uses tables for everything that goes beyond basic types. Especially arrays</span>
<span class="c1">-- and associative containers are modeled using tables. Note that tables in lua</span>
<span class="c1">-- can even be used to model classes for object oriented programming. However</span>
<span class="c1">-- we won't go into that in this tutorial.</span>

<span class="c1">-- A simple array. Note that indices start at 1.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"An array:"</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">}</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">while</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">~=</span> <span class="kc">nil</span> <span class="k">do</span>
	<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
	<span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
<span class="k">end</span>


<span class="c1">-- Arrays can also be filled dynamically. Note that the variable first has to</span>
<span class="c1">-- contain a table.</span>
<span class="c1">-- Another interesting thing about lua tables (and thus arrays) is that different</span>
<span class="c1">-- entries can contain values of different types.</span>
<span class="n">dynArray</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">dynArray</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"a string "</span>
<span class="n">dynArray</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"and a number: "</span>
<span class="n">dynArray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">13</span>

<span class="c1">-- we're using the ipairs method here, which allows us to iterate over all entries</span>
<span class="c1">-- of an array until the value nil is reached.</span>
<span class="n">str</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">tval</span> <span class="k">in</span> <span class="nb">ipairs</span><span class="p">(</span><span class="n">dynArray</span><span class="p">)</span> <span class="k">do</span>
	<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">tval</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"And another array: "</span> <span class="o">..</span> <span class="n">str</span><span class="p">)</span>


<span class="c1">-- tables can of course also contain other tables:</span>
<span class="n">dynArray</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">33</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">1100</span><span class="p">,</span> <span class="s2">"end of subtable"</span><span class="p">}</span>


<span class="c1">-- Note that arrays are not copied during assignment. Instead both variables</span>
<span class="c1">-- then point to the same table</span>
<span class="n">tmpArray</span> <span class="o">=</span> <span class="n">dynArray</span>
<span class="c1">-- tmpArray and dynArray now both point to the same table.</span>


<span class="c1">-- tables can also be used as associative containers (indeed, this is what they are):</span>
<span class="n">con</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">con</span><span class="p">[</span><span class="s2">"name"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Sebastian"</span>
<span class="n">con</span><span class="p">[</span><span class="s2">"occupation"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"..."</span>
<span class="n">con</span><span class="p">[</span><span class="s2">"age"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"private!"</span>

<span class="c1">-- There's an interesting alternative syntax to access those fields</span>
<span class="c1">-- which are identified by a string:</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Name: "</span> <span class="o">..</span> <span class="n">con</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Occupation: "</span> <span class="o">..</span> <span class="n">con</span><span class="p">.</span><span class="n">occupation</span><span class="p">)</span>
<span class="c1">-- of course the original array-like access is also valid:</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Age: "</span> <span class="o">..</span> <span class="n">con</span><span class="p">[</span><span class="s2">"age"</span><span class="p">])</span>


<span class="c1">-- Be sure to check the reference documentation on tables.</span>

<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- Section 4: functions</span>
<span class="c1">--------------------------------------------------------------------------------</span>

<span class="c1">-- In this section we'll introduce functions. They can be used similarily to</span>
<span class="c1">-- functions in nearly every other programming language. However there is one</span>
<span class="c1">-- important difference: A function can return multiple return values.</span>

<span class="k">function</span> <span class="nf">AddFunc</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"48 and 89 sums up to "</span> <span class="o">..</span> <span class="n">AddFunc</span><span class="p">(</span><span class="mi">48</span><span class="p">,</span> <span class="mi">89</span><span class="p">))</span>


<span class="c1">-- Now a method with two return values</span>

<span class="k">function</span> <span class="nf">Scale</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="n">y</span><span class="o">*</span><span class="n">a</span>
<span class="k">end</span>

<span class="n">xScaled</span><span class="p">,</span> <span class="n">yScaled</span> <span class="o">=</span> <span class="n">Scale</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"3 and 4 scaled by 2 results in "</span> <span class="o">..</span> <span class="n">xScaled</span> <span class="o">..</span> <span class="s2">" and "</span> <span class="o">..</span> <span class="n">yScaled</span><span class="p">)</span>


<span class="c1">-- NOTE: omitted parameters are set to nil:</span>
<span class="k">function</span> <span class="nf">myprint</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
	<span class="k">if</span><span class="p">(</span><span class="n">a</span> <span class="o">~=</span> <span class="kc">nil</span><span class="p">)</span> <span class="k">then</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">end</span>
	<span class="k">if</span><span class="p">(</span><span class="n">b</span> <span class="o">~=</span> <span class="kc">nil</span><span class="p">)</span> <span class="k">then</span> <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">end</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"myprint(\"</span><span class="n">hello</span><span class="p">:</span><span class="err">\</span><span class="s2">") "</span><span class="p">)</span>
<span class="n">myprint</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">)</span> <span class="c1">-- omitted parameter 'b'</span>
<span class="n">myprint</span><span class="p">()</span> <span class="c1">-- omitted both parameters</span>

<span class="c1">-- (this is also true for wrapped C/C++-functions)</span>

<span class="c1">-- functions can also be part of tables (this can be used to create 'namespaces')</span>
<span class="n">mytable</span> <span class="o">=</span> <span class="n">mytable</span> <span class="ow">or</span> <span class="p">{}</span>
<span class="k">function</span> <span class="nc">mytable</span><span class="p">.</span><span class="nf">print_stuff</span><span class="p">()</span>
	<span class="nb">print</span><span class="p">(</span><span class="s2">"hello!"</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">mytable</span><span class="p">.</span><span class="n">print_stuff</span><span class="p">();</span>

<span class="c1">-- to 'extend namespaces' use</span>
<span class="n">mytable</span> <span class="o">=</span> <span class="n">mytable</span> <span class="ow">or</span> <span class="p">{}</span>
<span class="c1">-- because if you use</span>
<span class="n">mytable</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c1">-- mytable.print_stuff is gone.</span>

<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- Section 5: scopes</span>
<span class="c1">--------------------------------------------------------------------------------</span>

<span class="c1">-- Note that lua has special scope rules. A variable used in a method is</span>
<span class="c1">-- by default a global variable and exists even after the method was terminated.</span>
<span class="c1">-- If you want to use temporary variables only visible inside the function</span>
<span class="c1">-- itself, you have to use the 'local' keyword:</span>

<span class="c1">-- Here an example with a non-local variable first used in a function:</span>
<span class="k">function</span> <span class="nf">SetGlobalVar</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
	<span class="n">globalVar</span> <span class="o">=</span> <span class="n">a</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of globalVar before call to SetGlobalVar(77): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">globalVar</span><span class="p">)</span>
<span class="n">SetGlobalVar</span><span class="p">(</span><span class="mi">77</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of globalVar after call to SetGlobalVar(77): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">globalVar</span><span class="p">)</span>


<span class="c1">-- And now an example with a local variable</span>
<span class="k">function</span> <span class="nf">SetLocalVar</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
	<span class="kd">local</span> <span class="n">localVar</span> <span class="o">=</span> <span class="n">a</span>
<span class="k">end</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of localVar before call to SetLocalVar(33): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">localVar</span><span class="p">)</span>
<span class="n">SetLocalVar</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Value of localVar after call to SetLocalVar(33): "</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">localVar</span><span class="p">)</span>


<span class="c1">--------------------------------------------------------------------------------</span>
<span class="c1">-- Section 6: standard libraries (http://www.lua.org/manual/5.1/manual.html#5)</span>
<span class="c1">--------------------------------------------------------------------------------</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"LUA Version is "</span> <span class="o">..</span> <span class="n">_VERSION</span><span class="p">)</span> <span class="c1">-- might be nice to know</span>

<span class="c1">-- string manipulation (http://www.lua.org/manual/5.1/manual.html#5.4)</span>
<span class="c1">-- sometimes you want to format your strings like this</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"normal: "</span> <span class="o">..</span> <span class="nb">math.pi</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"formatted: "</span> <span class="o">..</span> <span class="nb">string.format</span> <span class="p">(</span><span class="s2">"%.40f"</span><span class="p">,</span> <span class="nb">math.pi</span><span class="p">)</span> <span class="p">)</span>

<span class="c1">-- math functions (http://www.lua.org/manual/5.1/manual.html#5.6)</span>
<span class="c1">-- math.abs     math.acos    math.asin    math.atan    math.atan2</span>
<span class="c1">-- math.ceil    math.cos     math.deg     math.exp     math.floor</span>
<span class="c1">-- math.log     math.log10   math.max     math.min     math.mod</span>
<span class="c1">-- math.pow     math.rad     math.sin     math.sqrt    math.tan</span>
<span class="c1">-- math.frexp   math.ldexp   math.random  math.randomseed</span>

<span class="c1">-- i/o . (http://www.lua.org/manual/5.1/manual.html#5.7)</span>
<span class="c1">-- with io.open, you get access to files. io.open returns a handle which is actually a FILE* pointer</span>
<span class="n">file</span> <span class="o">=</span> <span class="nb">io.open</span><span class="p">(</span><span class="s2">"tut01_lua_basics_output.txt"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">)</span>
<span class="c1">-- use file:write to write data to the file</span>
<span class="n">file</span><span class="p">:</span><span class="n">write</span><span class="p">(</span><span class="s2">"hello world"</span><span class="p">)</span>  <span class="c1">-- this is the same as file:write(tostring(s))</span>
<span class="nb">io.close</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="c1">-- operating system facilities (http://www.lua.org/manual/5.1/manual.html#5.8)</span>
<span class="c1">-- we only cover time and date functions here:</span>
<span class="n">tBefore</span> <span class="o">=</span> <span class="nb">os.clock</span><span class="p">()</span>
<span class="c1">-- do something</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">1</span> <span class="k">do</span>
<span class="n">str</span> <span class="o">=</span> <span class="n">str</span> <span class="o">..</span> <span class="n">i</span> <span class="o">..</span> <span class="s2">" "</span>
<span class="k">end</span>
<span class="n">tAfter</span> <span class="o">=</span> <span class="nb">os.clock</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"took "</span> <span class="o">..</span> <span class="n">tAfter</span><span class="o">-</span><span class="n">tBefore</span> <span class="o">..</span> <span class="s2">" seconds!"</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">"it is "</span> <span class="o">..</span> <span class="nb">os.date</span><span class="p">(</span><span class="s2">"%X on %x"</span><span class="p">))</span>
<span class="n">filenamedate</span> <span class="o">=</span> <span class="nb">os.date</span><span class="p">(</span><span class="s2">"y%ym%dd%d"</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"you can use "</span> <span class="o">..</span> <span class="n">filenamedate</span> <span class="o">..</span> <span class="s2">" as prefix for your files"</span><span class="p">)</span></code></pre>
        </figure>
      </div>
    </div>

    <footer class="ug-footer">
      <div class="container px-1">
        <div class="row justify-content-between">
          <div class="col-lg-4 order-lg-2">
            <p class="footer-text">
              <a class="cf-a" href="/UG4Webpage/imprint">Imprint</a> |
              <a class="cf-a" href="/UG4Webpage/privacy">Privacy Declaration</a>
            </p>
          </div>
          <div class="col-lg-8 order-lg-1">
            <p class="copyright-text">
              &copy 2009-2023 - Goethe Center for Scientific Computing, G-CSC,
              Goethe University Frankfurt
            </p>
          </div>
        </div>
      </div>

      <script src="/UG4Webpage/assets/js/bootstrap.bundle.min.js"></script>
    </footer>
  </body>
</html>
